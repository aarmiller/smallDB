---
title: "smallDB - A package for working with small truven databases"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Overview


## Examples

```{r}
library(tidyverse)
library(smallDB)
```



```{r}
# connect to database
con <- DBI::dbConnect(RSQLite::SQLite(), "~/Data/cftr/pancreatitis_chronic.db")
```

### Create timemap

Create timemap, in this example visit keys have not been added to the database,
so these will be added temporarily to create the timemap.

```{r}
tm <- build_time_map(db_con = con)

tm

```

### Add indicators

Create a list of diagnosis indicators. In this example we add indicators for CDI.

```{r}

dx_list <- list(cdi = list(icd9_codes = "00845",
                           icd10_codes = c("A047","A0471","A0472")))

dx_list

build_dx_indicators(db_con = con,condition_dx_list = dx_list)

```


### Close database connection

```{r}
DBI::dbDisconnect(con)

```



